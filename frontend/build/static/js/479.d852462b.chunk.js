"use strict";(self.webpackChunkles_delices_de_tressy=self.webpackChunkles_delices_de_tressy||[]).push([[479],{4479:function(e,n,t){t.r(n),t.d(n,{default:function(){return x}});var s=t(678),r=t(2791),a=t(7689),i=t(1087),c=t(1683),u=t(1303),l=t(7574),o=t(184),f=function(e){var n=e.items,t=100,a=Math.ceil(n.length/t),i=(0,r.useState)(1),c=(0,s.Z)(i,2),f=c[0],d=c[1],h=(f-1)*t,m=h+t,j=n.slice(h,m),x=f>t,p=f+t<a,v=(0,u.Z)(Array(a)).map((function(e,n){return n+1}));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"list-view","data-testid":"list-view",children:j.map((function(e){return(0,o.jsx)(l.Z,{data:e},e.id)}))}),a>1&&(0,o.jsx)("nav",{className:"pagination",children:(0,o.jsxs)("ul",{children:[x&&(0,o.jsx)("li",{className:"previous-page",children:(0,o.jsx)("button",{className:"previous-page",onClick:function(){return d(f-1)},children:"\u276e"})}),v.map((function(e){return(0,o.jsx)("li",{children:(0,o.jsx)("button",{className:"".concat(f===e?"active":""," page-").concat(e),onClick:function(){return d(e)},children:e})},e)})),p&&(0,o.jsx)("li",{children:(0,o.jsx)("button",{className:"next-page",onClick:function(){return d(f+1)},children:"\u276f"})})]})})]})},d=t(9235),h=t(4423),m=t(8357),j=t(3153),x=function(){var e=(0,r.useState)(""),n=(0,s.Z)(e,2),t=n[0],u=n[1],l=(0,r.useState)([]),x=(0,s.Z)(l,2),p=x[0],v=x[1],g=(0,r.useState)(!1),C=(0,s.Z)(g,2),N=C[0],Z=C[1],b=(0,r.useContext)(m.Z).error,k=(0,a.TH)().pathname.split("/").pop(),S={offerType:k,title:t},y=(0,j.C)((function(e){var n=e.cart;return Object.values(n.cart).reduce((function(e,n){return e+n.quantity}),0)})),_=(0,j.C)((function(e){return e.user})),w=!!_&&["mamdjotresia99","mawelle","mkjenny","fabrigeas"].includes(_.email.split("@")[0]),T=function(e){null===e||void 0===e||e.preventDefault(),Z(!0);var n="offers?".concat(new URLSearchParams(S).toString());c.Z.get(n).then((function(e){var n=e.data;v(n.offers)})).catch((function(e){b(e.message,"Failed to get offers")})).finally((function(){return Z(!1)}))},E=function(e,n){var t=(0,r.useState)(e),a=(0,s.Z)(t,2),i=a[0],c=a[1];return(0,r.useEffect)((function(){var t=setTimeout((function(){c(e)}),n);return function(){clearTimeout(t)}}),[e,n]),i}(t,500);return(0,r.useEffect)((function(){T()}),[k,E]),(0,o.jsxs)("div",{className:"home",children:[(0,o.jsx)("hr",{}),(0,o.jsx)("form",{onSubmit:T,children:(0,o.jsxs)("div",{className:"searchbox",children:[(0,o.jsx)("input",{value:t,onInput:function(e){return u(e.target.value)},placeholder:"Search by title"}),(0,o.jsx)("span",{className:"search-icon",children:" \ud83d\udd0d "})]})}),(0,o.jsx)("div",{children:N?(0,o.jsx)(d.$j,{}):(0,o.jsx)(f,{items:p})}),(0,o.jsxs)("div",{className:"actions",children:[w?(0,o.jsx)(i.rU,{to:h.Z6.NEW_OFFER,children:"Create new offer"}):null,y?(0,o.jsxs)(i.rU,{to:h.Z6.MY_CART,children:["Checkout\xa0","".concat(y," ").concat(y>1?"items":"item")]}):null]})]})}}}]);
//# sourceMappingURL=479.d852462b.chunk.js.map