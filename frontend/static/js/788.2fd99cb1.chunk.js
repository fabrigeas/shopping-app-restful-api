"use strict";(self.webpackChunkles_delices_de_tressy=self.webpackChunkles_delices_de_tressy||[]).push([[788],{9788:function(e,n,t){t.r(n),t.d(n,{default:function(){return x}});var s=t(678),r=t(2791),a=t(7689),c=t(1087),i=t(1683),u=t(1303),l=t(7574),o=t(184),f=function(e){var n=e.items,t=Math.ceil(n.length/3),a=(0,r.useState)(1),c=(0,s.Z)(a,2),i=c[0],f=c[1],d=3*(i-1),h=d+3,v=n.slice(d,h),m=i>3,x=i+3<t,j=(0,u.Z)(Array(t)).map((function(e,n){return n+1}));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"list-view","data-testid":"list-view",children:v.map((function(e){return(0,o.jsx)(l.Z,{data:e},e.id)}))}),t>1&&(0,o.jsx)("nav",{className:"pagination",children:(0,o.jsxs)("ul",{children:[m&&(0,o.jsx)("li",{className:"previous-page",children:(0,o.jsx)("button",{className:"previous-page",onClick:function(){return f(i-1)},children:"\u276e"})}),j.map((function(e){return(0,o.jsx)("li",{children:(0,o.jsx)("button",{className:"".concat(i===e?"active":""," page-").concat(e),onClick:function(){return f(e)},children:e})},e)})),x&&(0,o.jsx)("li",{children:(0,o.jsx)("button",{className:"next-page",onClick:function(){return f(i+1)},children:"\u276f"})})]})})]})},d=function(){return(0,o.jsx)("div",{className:"loader"})},h=t(4423),v=t(8357),m=t(3153),x=function(){var e=(0,r.useState)(""),n=(0,s.Z)(e,2),t=n[0],u=n[1],l=(0,r.useState)([]),x=(0,s.Z)(l,2),j=x[0],p=x[1],g=(0,r.useState)(!1),N=(0,s.Z)(g,2),C=N[0],Z=N[1],b=(0,r.useContext)(v.Z).error,y=(0,a.TH)().pathname.split("/").pop(),S={offerType:y,title:t},k=(0,m.C)((function(e){var n=e.cart;return Object.values(n.value.cart).reduce((function(e,n){return e+n.quantity}),0)})),_=(0,m.C)((function(e){var n;return null===(n=e.user.value)||void 0===n?void 0:n.email.includes("mawelle")})),w=function(e){null===e||void 0===e||e.preventDefault(),Z(!0);var n="offers?".concat(new URLSearchParams(S).toString());i.Z.get(n).then((function(e){var n=e.data;p(n.offers)})).catch((function(e){b(e.message,"Failed to get offers")})).finally((function(){return Z(!1)}))},T=function(e,n){var t=(0,r.useState)(e),a=(0,s.Z)(t,2),c=a[0],i=a[1];return(0,r.useEffect)((function(){var t=setTimeout((function(){i(e)}),n);return function(){clearTimeout(t)}}),[e,n]),c}(t,500);return(0,r.useEffect)((function(){w()}),[y,T]),(0,o.jsxs)("div",{className:"home",children:[(0,o.jsx)("hr",{}),(0,o.jsx)("form",{onSubmit:w,children:(0,o.jsxs)("div",{className:"searchbox",children:[(0,o.jsx)("input",{value:t,onInput:function(e){return u(e.target.value)},placeholder:"Search by title"}),(0,o.jsx)("span",{className:"search-icon",children:" \ud83d\udd0d "})]})}),(0,o.jsx)("div",{children:C?(0,o.jsx)(d,{}):(0,o.jsx)(f,{items:j})}),(0,o.jsxs)("div",{className:"actions",style:{},children:[_?(0,o.jsx)(c.rU,{to:h.Z6.NEW_OFFER,children:"Create new offer"}):null,k?(0,o.jsxs)(c.rU,{to:h.Z6.MY_CART,style:{},children:["Checkout\xa0","".concat(k," ").concat(k>1?"items":"item")]}):null]})]})}}}]);
//# sourceMappingURL=788.2fd99cb1.chunk.js.map